<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
    <script type="text/javascript" charset="utf8" src="DataTables-1.10.13/media/js/jquery.js"></script>

</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="chart1" style="width: 600px;height:400px;"></div>
    <div id="chart2" style="width: 600px;height:400px;"></div>
    <div id="chart3" style="width: 600px;height:400px;"></div>

    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart1 = echarts.init(document.getElementById('chart1'));
        var myChart2 = echarts.init(document.getElementById('chart2'));
        var myChart3 = echarts.init(document.getElementById('chart3'));


        option1 = {
            title: {
                text: '各类型交易数量'
            },
            color: ['#3398DB'],
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'line'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            dataZoom: [
                {   // 这个dataZoom组件，默认控制x轴。
                    type: 'slider', // 这个 dataZoom 组件是 slider 型 dataZoom 组件
                    start: 10,      // 左边在 10% 的位置。
                    end: 60         // 右边在 60% 的位置。
                }
            ],
            tooltip: {},
            // legend: {
            //     data:['销量']
            // },
            xAxis: {
                data: []
            },
            yAxis: {},
            series: [{
                name: '交易类型',
                type: 'bar',
                data: []
            }]
        };
        myChart1.setOption(option1)


        // myChart1.showLoading();
        option2 = {
            title: {
                text: '每日平均区块高度'
            },
            color: ['#3398DB'],
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'line'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            tooltip: {},
            // legend: {
            //     data:['销量']
            // },
            xAxis: {
                data: []
            },
            yAxis: {},
            series: [{
                name: '日期',
                type: 'bar',
                data: []
            }]
        };
        myChart2.setOption(option2)


        // myChart1.showLoading();

        jQuery(document).ready(function($)
        {   
            //the code to change text
            // $.get("http://10.15.190.230:10010/blocks",function(datac,status){
            $.get("http://10.15.190.230:10010/trans_groupby_type",function(data,status){
                // myChart1.hideLoading();
                var a = data.split('|')
                var categories = []
                var seriesdata = []

                for(var j =0; j<a.length; j++){
                    var tmp = a[j].split(',')
                    categories.push(tmp[0])
                    seriesdata.push(tmp[1])
                }

                myChart1.setOption({
                    xAxis: {
                        data: categories
                    },
                    series: [{
                        // 根据名字对应到相应的系列
                        name: '交易类型',
                        data: seriesdata
                    }]
                });
            })
           $.get("http://10.15.190.230:10010/daily_blocks_height",function(data,status){
                // myChart1.hideLoading();
                console.log(data)
                var a = data.split('|')
                var categories = []
                var seriesdata = []

                for(var j =0; j<a.length; j++){
                    var tmp = a[j].split(',')
                    categories.push(tmp[0])
                    seriesdata.push(tmp[1])
                }

                myChart2.setOption({
                    xAxis: {
                        data: categories
                    },
                    series: [{
                        // 根据名字对应到相应的系列
                        name: '日期',
                        data: seriesdata
                    }]
                });
            })
        })





    </script>
</body>
</html>